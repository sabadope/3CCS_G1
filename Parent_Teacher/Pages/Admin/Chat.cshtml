@page
@model Parent_Teacher.Pages.Admin.ChatModel
@using Parent_Teacher.Models

<h2>Send a Message</h2>

<form method="post">
    <div class="mb-3">
        <label asp-for="NewMessage.Receiver" class="form-label"></label>
        <input asp-for="NewMessage.Receiver" class="form-control" placeholder="Enter recipient username" />
        <span asp-validation-for="NewMessage.Receiver" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="NewMessage.Content" class="form-label"></label>
        <textarea asp-for="NewMessage.Content" class="form-control" placeholder="Type your message..."></textarea>
        <span asp-validation-for="NewMessage.Content" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Send</button>
    
</form>

<hr />
<h3>Inbox</h3>

@if (Model.Messages != null && Model.Messages.Count > 0)
{
    <ul class="list-group">
        @foreach (var message in Model.Messages)
        {
            <li class="list-group-item">
                <strong>From:</strong> @message.Sender<br />
                <strong>Sent:</strong> @message.Timestamp.ToString("g")<br />
                <strong>Message:</strong> @message.Content
            </li>
        }
    </ul>
}
else
{
    <p>No messages received yet.</p>
}

